---
sidebar_position: 1
title: Profiler Prerequisites Guide
---
import Admonition from '@theme/Admonition';

# Profiler Prerequisites Guide

- [Azure Synapse](#azure-synapse)
    - [Required Access to Synapse Workspace](#required-access-to-synapse-workspace)
    - [Setup User id/password for ODBC connectivity](#setup-user-idpassword-for-odbc-connectivity)
- [Microsoft SQL Server \(MSSQL\)](#microsoft-sql-server-mssql)
- [Oracle](#oracle)

## Azure Synapse

- Python 3.10+
- Databricks CLI [Download](https://docs.databricks.com/aws/en/dev-tools/cli/install)
- Azure CLI [Download](https://learn.microsoft.com/en-us/cli/azure/install-azure-cli)
- ODBC driver for SQL Server [Download](https://learn.microsoft.com/en-us/sql/connect/odbc/download-odbc-driver-for-sql-server?view=sql-server-ver17)
- (Windows only) Visual C++ [Download](https://learn.microsoft.com/en-us/cpp/windows/latest-supported-vc-redist?view=msvc-170)

Authenticate to Azure using Azure CLI:
```bash
az login
```
### Required Access to Synapse Workspace

:::warning Attention:
Skip this prerequisite if you are using a standalone SQL Dedicated Pool (formerly Azure SQL DW) and  NOT a Synapse Workspace
:::

- Profiler uses the Python version of Azure SDK libraries to extract information about target Synapse Workspace.
- For making the Azure API calls using Azure SDK you need an Azure Service Principal with the following role assignments.
Just giving the Synapse Administrator role is not enough. The below roles must be explicitly assigned.
    - Synapse Artifact User.
        - Assign from Synapse Workspace → Manage Access → Access Control [Refer to Azure documentation](https://learn.microsoft.com/en-us/azure/synapse-analytics/security/how-to-manage-synapse-rbac-role-assignments)
    - Monitoring Reader
        - Assign from Synapse Workspace → IAM

### Setup User id/password for ODBC connectivity
Create a user with SQL authentication mechanism to support querying below-mentioned tables in Synapse.

:::warning Attention:
The user should not have Multi-factor Authentication (MFA) enabled as ODBC does not support MFA
:::

This user id need to have read access (SELECT grants) on the following tables and VIEW DATABASE STATE and VIEW DEFINITION
grants are required for Dynamic Management Views (DMVs)

```sql
GRANT VIEW DATABASE STATE TO <user_id>
GRANT VIEW DEFINITION TO <user_id>
```


- Dedicated SQL pool - Tables
    - sys.databases
    - information_schema.tables
    - information_schema.columns
    - information_schema.views
    - information_schema.routines

- Dedicated SQL pool - DMVs
    - sys.dm_pdw_exec_sessions
    - sys.dm_pdw_exec_requests
    - sys.dm_pdw_nodes_db_partition_stats
    - sys.dm_pdw_nodes_exec_query_stats

- Serverless SQL Pool - Tables
    - sys.databases
    - information_schema.tables
    - information_schema.columns
    - information_schema.views
    - information_schema.routines

- Serverless SQL pool - DMVs
    - sys.dm_exec_sessions
    - sys.dm_exec_requests
    - sys.dm_exec_query_stats
    - sys.dm_exec_sql_text
    - sys.dm_exec_requests_history
    - sys.dm_external_data_processed

[Back to Configure Profiler](../#configure-profiler)

## Microsoft SQL Server (MSSQL)
<Admonition type="info" title="Coming Soon">
    SQLServer coming soon! Stay tuned for updates.
</Admonition>

[Back to Configure Profiler](../#configure-profiler)

## Oracle
<Admonition type="info" title="Coming Soon">
    Oracle coming soon! Stay tuned for updates.
</Admonition>

[Back to Configure Profiler](../#configure-profiler)
